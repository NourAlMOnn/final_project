/* ============================= */
/* تعريف ألوان المتغيرات العامة */
/* ============================= */
:root {
    --primary-color: #58a6ff;      /* اللون الأساسي للأزرار والعناوين */
    --secondary-color: #1f6feb;    /* لون ثانوي للأزرار النشطة */
    --bg-dark: #0d1117;           /* لون خلفية الصفحة */
    --panel-bg: #161b22;          /* لون خلفية اللوحة الجانبية */
    --text-color: #c9d1d9;        /* لون النص */
    --accent-color: #238636;      /* لون النجاح (أخضر) */
    --danger-color: #da3633;      /* لون الخطر (أحمر) */
}

/* ============================= */
/* إعادة ضبط القيم الافتراضية */
/* ============================= */
* {
    box-sizing: border-box; /* يخلي الحجم يشمل البوردر والبadding */
    margin: 0;             /* إزالة الهوامش الافتراضية */
    padding: 0;           /* إزالة المسافات الداخلية الافتراضية */
}

/* ============================= */
/* تنسيق جسم الصفحة */
/* ============================= */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* نوع الخط */
    background-color: var(--bg-dark); /* لون الخلفية */
    color: var(--text-color);         /* لون النص */
    overflow-x: hidden;              /* منع التمرير الأفقي */
}

/* ============================= */
/* الحاوية الرئيسية للتطبيق */
/* ============================= */
.app-container {
    display: flex;           /* استخدام نظام المرونة */
    flex-direction: column; /* ترتيب العناصر عموديًا */
    height: 100vh;          /* ارتفاع كامل الشاشة */
    padding: 20px;         /* مسافة داخلية حول المحتوى */
}

/* ============================= */
/* ترويسة التطبيق */
/* ============================= */
header {
    text-align: center;     /* محاذاة النص في المنتصف */
    margin-bottom: 20px;   /* مسافة أسفل العنوان */
}

/* ============================= */
/* عنوان التطبيق */
/* ============================= */
header h1 {
    color: var(--primary-color); /* لون العنوان */
    font-size: 2.5rem;          /* حجم الخط */
    margin-bottom: 5px;        /* مسافة أسفل العنوان */
}

/* ============================= */
/* المحتوى الرئيسي */
/* ============================= */
main {
    display: flex;     /* ترتيب الفيديو والسايدبار جنب بعض */
    flex: 1;          /* أخذ المساحة المتبقية */
    gap: 20px;        /* مسافة بين العناصر */
    min-height: 0;   /* منع مشاكل التمدد */
}

/* ============================= */
/* قسم الفيديو (تم تكبيره بشكل بسيط فقط) */
/* ============================= */
.video-section {
    flex: 3;                     /* حجم الفيديو أكبر من السايدبار لكن مو ضخم */
    background-color: #000;     /* خلفية سوداء للفيديو */
    border-radius: 12px;        /* زوايا دائرية */
    position: relative;        /* لتثبيت عناصر داخلية */
    display: flex;             /* نظام مرن */
    flex-direction: column;   /* ترتيب عمودي */
    overflow: hidden;         /* إخفاء الزائد */
    box-shadow: 0 10px 30px rgba(0,0,0,0.5); /* ظل */
}

/* ============================= */
/* إطار الكانفاس */
/* ============================= */
.canvas-wrapper {
    flex: 1;                      /* يأخذ كل المساحة داخل الفيديو */
    position: relative;         /* مرجع للعناصر الداخلية */
    display: flex;             /* نظام مرن */
    justify-content: center;   /* توسيط أفقي */
    align-items: center;       /* توسيط عمودي */
}

/* ============================= */
/* الكانفاس نفسه */
/* ============================= */
#output_canvas {
    width: 95%;          /* عرض شبه كامل بدون ما يكبر زيادة */
    height: 95%;         /* ارتفاع شبه كامل */
    object-fit: contain;/* الحفاظ على النسبة */
}

/* ============================= */
/* شريط الأزرار تحت الفيديو */
/* ============================= */
.controls-overlay {
    background: rgba(22, 27, 34, 0.8); /* خلفية شفافة */
    padding: 15px;                   /* مسافة داخلية */
    display: flex;                 /* ترتيب أفقي */
    justify-content: center;      /* توسيط */
}

/* ============================= */
/* اللوحة الجانبية */
/* ============================= */
.sidebar {
    flex: 1;                      /* حجم أصغر من الفيديو */
    background-color: var(--panel-bg); /* لون الخلفية */
    border-radius: 12px;         /* زوايا دائرية */
    display: flex;              /* نظام مرن */
    flex-direction: column;    /* ترتيب عمودي */
    padding: 15px;             /* مسافة داخلية */
    overflow-y: auto;          /* تمرير عمودي عند الحاجة */
}

/* ============================= */
/* أزرار تصنيفات الفلاتر */
/* ============================= */
.filter-categories {
    display: flex;      /* ترتيب أفقي */
    flex-wrap: wrap;   /* السماح بالانتقال لسطر جديد */
    gap: 5px;          /* مسافة بين الأزرار */
    margin-bottom: 15px; /* مسافة أسفل */
}

/* ============================= */
/* زر التبويب */
/* ============================= */
.tab-btn {
    padding: 8px 12px;           /* مسافة داخلية */
    border: none;               /* بدون إطار */
    background: #21262d;       /* لون الخلفية */
    color: var(--text-color);  /* لون النص */
    border-radius: 6px;        /* زوايا دائرية */
    cursor: pointer;          /* شكل المؤشر */
    transition: 0.3s;         /* حركة ناعمة */
    font-size: 0.9rem;        /* حجم الخط */
}

/* ============================= */
/* زر نشط */
/* ============================= */
.tab-btn.active {
    background: var(--secondary-color); /* لون مختلف */
    color: #fff;                        /* نص أبيض */
}

/* ============================= */
/* شبكة الفلاتر */
/* ============================= */
.filter-grid {
    display: grid; /* استخدام الشبكة */
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); /* أعمدة مرنة */
    gap: 10px;     /* مسافة بين العناصر */
    margin-bottom: 20px; /* مسافة أسفل */
}

/* ============================= */
/* عنصر فلتر واحد */
/* ============================= */
.filter-item {
    background: #21262d;      /* لون الخلفية */
    border: 2px solid transparent; /* إطار شفاف */
    border-radius: 8px;      /* زوايا دائرية */
    padding: 10px;          /* مسافة داخلية */
    text-align: center;     /* محاذاة النص */
    cursor: pointer;       /* شكل المؤشر */
    transition: 0.2s;      /* حركة ناعمة */
}

/* ============================= */
/* عند المرور على الفلتر */
/* ============================= */
.filter-item:hover {
    background: #30363d; /* تغيير الخلفية */
}

/* ============================= */
/* فلتر نشط */
/* ============================= */
.filter-item.active {
    border-color: var(--primary-color); /* إطار ملون */
    background: #30363d;               /* لون مختلف */
}

/* ============================= */
/* صورة الفلتر */
/* ============================= */
.filter-item img {
    width: 50px;         /* عرض الصورة */
    height: 50px;        /* ارتفاع الصورة */
    object-fit: contain;/* الحفاظ على النسبة */
    margin-bottom: 5px; /* مسافة أسفل الصورة */
}

/* ============================= */
/* اسم الفلتر */
/* ============================= */
.filter-item span {
    font-size: 0.8rem; /* حجم النص */
    display: block;   /* عرض كسطر كامل */
}

/* ============================= */
/* لوحة التعديلات */
/* ============================= */
.adjustment-panel {
    border-top: 1px solid #30363d; /* خط علوي */
    padding-top: 15px;           /* مسافة من الأعلى */
}

/* ============================= */
/* عنوان لوحة التعديلات */
/* ============================= */
.adjustment-panel h3 {
    margin-bottom: 15px; /* مسافة أسفل */
    font-size: 1.1rem;  /* حجم الخط */
}

/* ============================= */
/* مجموعة التحكم */
/* ============================= */
.control-group {
    margin-bottom: 15px; /* مسافة أسفل */
}

/* ============================= */
/* تسمية شريط التحكم */
/* ============================= */
.control-group label {
    display: block;     /* عرض كسطر */
    margin-bottom: 5px;/* مسافة أسفل */
    font-size: 0.9rem; /* حجم الخط */
}

/* ============================= */
/* شريط التمرير */
/* ============================= */
input[type="range"] {
    width: 100%;                      /* عرض كامل */
    accent-color: var(--primary-color); /* لون المؤشر */
}

/* ============================= */
/* الأزرار العامة */
/* ============================= */
.btn-primary, 
.btn-secondary, 
.btn-success, 
.btn-danger {
    padding: 10px 20px; /* مسافة داخلية */
    border: none;      /* بدون إطار */
    border-radius: 6px; /* زوايا دائرية */
    cursor: pointer;  /* شكل المؤشر */
    font-weight: bold;/* خط عريض */
    transition: 0.3s;/* حركة ناعمة */
    margin: 0 5px;   /* مسافة جانبية */
}

/* ============================= */
/* ألوان الأزرار */
/* ============================= */
.btn-primary { background: var(--secondary-color); color: #fff; }
.btn-secondary { background: #30363d; color: var(--text-color); }
.btn-success { background: var(--accent-color); color: #fff; }
.btn-danger { 
    background: var(--danger-color); 
    color: #fff; 
    width: 100%; 
    margin: 10px 0; 
}

/* ============================= */
/* مؤشر التحميل */
/* ============================= */
.spinner {
    position: absolute; /* تثبيت داخل الحاوية */
    border: 4px solid rgba(255, 255, 255, 0.1); /* إطار شفاف */
    border-left-color: var(--primary-color); /* لون متحرك */
    border-radius: 50%; /* دائري */
    width: 40px;       /* عرض */
    height: 40px;      /* ارتفاع */
    animation: spin 1s linear infinite; /* حركة دوران */
    display: none;    /* مخفي افتراضيًا */
}

/* ============================= */
/* حركة الدوران */
/* ============================= */
@keyframes spin {
    to { transform: rotate(360deg); } /* تدوير كامل */
}

/* ============================= */
/* استجابة للشاشات الصغيرة */
/* ============================= */
@media (max-width: 768px) {
    main { 
        flex-direction: column; /* ترتيب عمودي */
    }

    .video-section { 
        height: 400px; /* ارتفاع مناسب للجوال */
    }
}
